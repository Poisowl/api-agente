{
    "bot": {
        "name": "ChatBotMultiCanal",
        "version": "3.0",
        "language": "es",
        "defaultFlow": "bienvenida",
        "sessionVariables": {},
        "errorFlow": "error_handler",
        "channels": [
            "whatsapp",
            "telegram",
            "web"
        ],
        "flows": {
            "bienvenida": {
                "type": "message",
                "content": "üë©‚Äç‚öïÔ∏èüë®‚Äç‚öïÔ∏è Bienvenido al ChatBot de EsSalud. üè•üíô",
                "next": "menu_principal"
            },
            "menu_principal": {
                "type": "options",
                "content": "Por favor selecciona una opci√≥n:",
                "options": [
                    {
                        "label": "Preguntas frecuentes ‚ùì",
                        "value": "faq",
                        "next": "preguntas_frecuentes"
                    },
                    {
                        "label": "Registrarme üìù",
                        "value": "registro",
                        "next": "form_registro"
                    },
                    {
                        "label": "Consultar servicios üíº",
                        "value": "consultar_servicios",
                        "next": "servicios_listado"
                    },
                    {
                        "label": "Dar feedback ‚úçÔ∏è",
                        "value": "feedback",
                        "next": "encuesta_satisfaccion"
                    }
                ]
            },
            "preguntas_frecuentes": {
                "type": "qa",
                "content": "Selecciona la pregunta que quieres que responda:",
                "questions": [
                    {
                        "question": "¬øCu√°l es el horario de atenci√≥n?",
                        "answer": "Nuestro horario es de lunes a viernes de 8:00 a 18:00 hrs.",
                        "next": "preguntas_frecuentes"
                    },
                    {
                        "question": "¬øD√≥nde est√°n ubicados?",
                        "answer": "Av. Ejemplo 123, Ciudad.",
                        "next": "preguntas_frecuentes"
                    },
                    {
                        "question": "Volver al men√∫ principal",
                        "answer": "",
                        "next": "menu_principal"
                    }
                ]
            },
            "form_registro": {
                "type": "form",
                "content": "",
                "fields": [
                    {
                        "name": "nombre",
                        "label": "Nombre completo",
                        "type": "text",
                        "required": true,
                        "validation": {
                            "regex": "^[a-zA-Z\\s]{3,50}$",
                            "errorMessage": "Nombre inv√°lido."
                        }
                    },
                    {
                        "name": "email",
                        "label": "Correo electr√≥nico",
                        "type": "email",
                        "required": true,
                        "validation": {
                            "regex": "^[\\w\\-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$",
                            "errorMessage": "Email inv√°lido."
                        }
                    },
                    {
                        "name": "telefono",
                        "label": "N√∫mero de tel√©fono",
                        "type": "text",
                        "required": false,
                        "validation": {
                            "regex": "^\\+?[0-9]{7,15}$",
                            "errorMessage": "Tel√©fono inv√°lido."
                        }
                    }
                ],
                "onSubmit": {
                    "service": {
                        "endpoint": "https://api.miempresa.com/registrar",
                        "method": "POST",
                        "body": {
                            "nombre": "{{nombre}}",
                            "email": "{{email}}",
                            "telefono": "{{telefono}}"
                        }
                    },
                    "next": "registro_exitoso"
                }
            },
            "registro_exitoso": {
                "type": "message",
                "content": "üéâ ¬°Registro completado con √©xito, {{nombre}}! ¬øDeseas volver al men√∫ principal?",
                "next": "menu_principal"
            },
            "servicios_listado": {
                "type": "dynamicService",
                "content": "Estos son los servicios disponibles:",
                "service": {
                    "endpoint": "https://api.miempresa.com/servicios",
                    "method": "GET",
                    "params": {}
                },
                "next": "menu_principal"
            },
            "encuesta_satisfaccion": {
                "type": "form",
                "content": "Queremos conocer tu opini√≥n sobre nuestro servicio:",
                "fields": [
                    {
                        "name": "calificacion",
                        "label": "Calificaci√≥n del 1 al 5 ‚≠ê",
                        "type": "number",
                        "required": true,
                        "validation": {
                            "min": 1,
                            "max": 5,
                            "errorMessage": "Debes ingresar un n√∫mero entre 1 y 5."
                        }
                    },
                    {
                        "name": "comentarios",
                        "label": "Comentarios adicionales",
                        "type": "text",
                        "required": false
                    }
                ],
                "onSubmit": {
                    "service": {
                        "endpoint": "https://api.miempresa.com/feedback",
                        "method": "POST",
                        "body": {
                            "usuario": "{{usuarioNombre}}",
                            "calificacion": "{{calificacion}}",
                            "comentarios": "{{comentarios}}"
                        }
                    },
                    "next": "agradecimiento_encuesta"
                }
            },
            "agradecimiento_encuesta": {
                "type": "message",
                "content": "üôè Gracias por tu opini√≥n, {{usuarioNombre}}. Esto nos ayuda a mejorar.",
                "next": "menu_principal"
            },
            "condicional_ejemplo": {
                "type": "conditional",
                "condition": "{{edad}} >= 18",
                "ifTrue": "mayor_edad",
                "ifFalse": "menor_edad"
            },
            "mayor_edad": {
                "type": "message",
                "content": "Eres mayor de edad, puedes acceder a todos los servicios.",
                "next": "menu_principal"
            },
            "menor_edad": {
                "type": "message",
                "content": "Eres menor de edad, algunos servicios pueden estar restringidos.",
                "next": "menu_principal"
            },
            "error_handler": {
                "type": "message",
                "content": "‚ö†Ô∏è Lo sentimos, ocurri√≥ un error. Por favor int√©ntalo nuevamente.",
                "next": "menu_principal"
            }
        }
    }
}